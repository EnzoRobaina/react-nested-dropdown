{"version":3,"file":"index.esm.js","sources":["../src/hooks/use-click-away.ts","../src/components/dropdown/utils.ts","../src/components/dropdown/index.tsx"],"sourcesContent":["import { RefObject, useEffect, useRef } from 'react';\r\n\r\nconst defaultEvents = ['mousedown', 'touchstart'];\r\n\r\nexport function useClickAway(\r\n  ref: RefObject<HTMLElement | null>,\r\n  onClickAway: (event: Event) => void,\r\n  events: string[] = defaultEvents,\r\n): void {\r\n  const savedCallback = useRef(onClickAway);\r\n\r\n  useEffect(() => {\r\n    savedCallback.current = onClickAway;\r\n  }, [onClickAway]);\r\n\r\n  useEffect(() => {\r\n    function handler(event: Event): void {\r\n      const { current: el } = ref;\r\n      if (el && !el.contains(event.target as Node)) {\r\n        savedCallback.current(event);\r\n      }\r\n    }\r\n\r\n    events.forEach(eventName => {\r\n      document.addEventListener(eventName, handler);\r\n    });\r\n\r\n    return () => {\r\n      events.forEach(eventName => {\r\n        document.removeEventListener(eventName, handler);\r\n      });\r\n    };\r\n  }, [events, ref]);\r\n}\r\n","import clsx from 'clsx';\r\n\r\nexport function getMenuPositionClassName(element: HTMLElement) {\r\n  const rect = element.getBoundingClientRect();\r\n  const isBottomOverflow = rect.bottom > window.innerHeight && rect.top > rect.height;\r\n  const isLeftOverflow = rect.left < 0;\r\n  const isRightOverflow = rect.right > window.innerWidth;\r\n  const isTopOverflow = rect.top < 0;\r\n\r\n  const className = clsx({\r\n    'rnd__menu--top': isBottomOverflow,\r\n    'rnd__menu--bottom': isTopOverflow,\r\n    'rnd__menu--right': isLeftOverflow,\r\n    'rnd__menu--left': isRightOverflow,\r\n  });\r\n\r\n  return className;\r\n}\r\n","import clsx from 'clsx';\r\nimport React, {\r\n  ReactElement,\r\n  ReactNode,\r\n  UIEvent,\r\n  useCallback,\r\n  useEffect,\r\n  useLayoutEffect,\r\n  useMemo,\r\n  useRef,\r\n  useState,\r\n  InputHTMLAttributes,\r\n} from 'react';\r\nimport { useClickAway } from '~/hooks/use-click-away';\r\nimport { getMenuPositionClassName } from './utils';\r\nimport _debounce from 'lodash/debounce';\r\n\r\nexport interface DropdownItem<TValue = undefined> {\r\n  label: string;\r\n  iconBefore?: ReactNode;\r\n  iconAfter?: ReactNode;\r\n  items?: DropdownItem<TValue>[];\r\n  itemsContainerWidth?: number | string;\r\n  value?: TValue;\r\n  onSelect?: () => void;\r\n  disabled?: boolean;\r\n  className?: string;\r\n  selected?: boolean;\r\n  renderInput?: (props: InputProps) => React.ReactNode;\r\n  debounce?: number;\r\n  maxHeight?: number;\r\n}\r\n\r\nexport interface DropdownProps<TValue> {\r\n  items: DropdownItem<TValue>[];\r\n  containerWidth?: number | string;\r\n  onSelect?: (value: TValue, option: DropdownItem<TValue>) => void;\r\n  children: (params: { onClick: () => void; isOpen: boolean }) => ReactElement;\r\n  className?: string;\r\n  renderOption?: (option: DropdownItem<TValue>) => ReactNode;\r\n  closeOnScroll?: boolean;\r\n  closeOnSelect?: boolean;\r\n  maxHeight?: number;\r\n}\r\n\r\nexport const Dropdown = <TValue,>({\r\n  items,\r\n  containerWidth = 300,\r\n  onSelect,\r\n  children,\r\n  className,\r\n  renderOption,\r\n  closeOnScroll = true,\r\n  closeOnSelect = true,\r\n  maxHeight,\r\n}: DropdownProps<TValue>): React.ReactElement => {\r\n  const containerRef = useRef<HTMLDivElement>(null);\r\n  const [menuPositionClassName, setMenuPositionClassName] = useState<string>('');\r\n  const [dropdownIsOpen, setDropdownOpen] = useState(false);\r\n\r\n  const toggleDropdown = useCallback(() => setDropdownOpen(state => !state), []);\r\n  const closeDropdown = useCallback(() => setDropdownOpen(false), []);\r\n\r\n  const childrenProps = useMemo(() => {\r\n    return {\r\n      isOpen: dropdownIsOpen,\r\n      onClick: toggleDropdown,\r\n    };\r\n  }, [dropdownIsOpen, toggleDropdown]);\r\n\r\n  const handleSelect = useCallback(\r\n    (item: DropdownItem<TValue>) => {\r\n      if (item.disabled) {\r\n        return;\r\n      }\r\n\r\n      if (item.onSelect) {\r\n        item.onSelect();\r\n      } else if (item.value !== undefined && onSelect) {\r\n        onSelect(item.value, item);\r\n      }\r\n      if (closeOnSelect) {\r\n        closeDropdown();\r\n      }\r\n    },\r\n    [closeDropdown, onSelect, closeOnSelect],\r\n  );\r\n\r\n  useClickAway(containerRef, closeDropdown);\r\n\r\n  const scrollListener = useCallback(\r\n    (e: Event) => {\r\n      const el = e.target as HTMLElement | null;\r\n      if (!el?.classList?.contains('rnd__menu')) {\r\n        closeDropdown();\r\n      }\r\n    },\r\n    [closeDropdown],\r\n  );\r\n\r\n  useEffect(() => {\r\n    if (dropdownIsOpen && closeOnScroll) {\r\n      document.addEventListener('scroll', scrollListener, true);\r\n    }\r\n    return () => {\r\n      document.removeEventListener('scroll', scrollListener, true);\r\n    };\r\n  }, [dropdownIsOpen]);\r\n\r\n  const rootMenuRef = useRef<HTMLUListElement>(null);\r\n\r\n  useLayoutEffect(() => {\r\n    if (dropdownIsOpen && rootMenuRef.current) {\r\n      setMenuPositionClassName(getMenuPositionClassName(rootMenuRef.current));\r\n    }\r\n    return () => {\r\n      if (dropdownIsOpen) {\r\n        setMenuPositionClassName('');\r\n      }\r\n    };\r\n  }, [dropdownIsOpen]);\r\n\r\n  return (\r\n    <div className={clsx('rnd', className)} ref={containerRef}>\r\n      {children(childrenProps)}\r\n      {dropdownIsOpen && (\r\n        <ul\r\n          className={`rnd__root-menu rnd__menu ${menuPositionClassName}`}\r\n          ref={rootMenuRef}\r\n          style={{ minWidth: containerWidth }}\r\n        >\r\n          {items.map((item, index) => (\r\n            <Option\r\n              maxHeight={maxHeight}\r\n              {...item}\r\n              key={index}\r\n              option={item}\r\n              onSelect={handleSelect}\r\n              renderOption={renderOption}\r\n            />\r\n          ))}\r\n        </ul>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport const DefaultInput = ({ value, mounted, ...rest }: InputProps) => {\r\n  return (\r\n    <input\r\n      style={{\r\n        maxWidth: '100%',\r\n      }}\r\n      value={value}\r\n      {...rest}\r\n      type=\"text\"\r\n      placeholder=\"Search...\"\r\n      className=\"rnd__search\"\r\n      autoFocus\r\n    />\r\n  );\r\n};\r\n\r\nexport interface InputProps extends InputHTMLAttributes<HTMLInputElement> {\r\n  mounted?: boolean;\r\n}\r\n\r\ninterface OptionProps<TValue> {\r\n  option: DropdownItem<TValue>;\r\n  onSelect: (item: DropdownItem<TValue>) => void;\r\n  renderOption?: (option: DropdownItem<TValue>) => React.ReactNode;\r\n  renderInput?: (props: InputProps) => React.ReactNode;\r\n  debounce?: number;\r\n  maxHeight?: number;\r\n  closeDebounce?: number;\r\n}\r\n\r\nconst Option = <TValue,>({\r\n  option,\r\n  onSelect,\r\n  renderOption,\r\n  renderInput,\r\n  debounce = 100,\r\n  maxHeight = undefined,\r\n  closeDebounce = 1000,\r\n}: OptionProps<TValue>): React.ReactElement => {\r\n  const items = option.items;\r\n  const hasSubmenu = items && items.length > 0;\r\n  const itemsContainerWidth = option.itemsContainerWidth ?? 150;\r\n  const [menuPositionClassName, setMenuPositionClassName] = useState<string>('');\r\n  const [submenuIsOpen, setSubmenuOpen] = useState(false);\r\n  const [searchValue, setSearchValue] = useState('');\r\n  const [, setRenderTrigger] = useState(false);\r\n\r\n  const filteredList = useMemo(\r\n    () =>\r\n      (searchValue\r\n        ? items?.filter(item =>\r\n            item.label.trim().toLowerCase().includes(searchValue.trim().toLowerCase()),\r\n          )\r\n        : items) ?? [],\r\n    [items, searchValue],\r\n  );\r\n\r\n  const handleClick = useCallback(\r\n    (e: UIEvent) => {\r\n      if (hasSubmenu) return;\r\n\r\n      e.stopPropagation();\r\n      onSelect(option);\r\n      setSearchValue('');\r\n    },\r\n    [hasSubmenu, onSelect, option],\r\n  );\r\n\r\n  const submenuRef = useRef<HTMLUListElement>(null);\r\n\r\n  useEffect(() => {\r\n    if (!submenuIsOpen && searchValue) {\r\n      setSearchValue('');\r\n    }\r\n  }, [submenuIsOpen]);\r\n\r\n  useEffect(() => {\r\n    const submenuElement = submenuRef.current;\r\n\r\n    const observer = new ResizeObserver(entries => {\r\n      entries.forEach(entry => {\r\n        const isHTMLElement = entry.target instanceof HTMLElement;\r\n        if (isHTMLElement) {\r\n          setSubmenuOpen(entry.target.offsetWidth > 0);\r\n          setMenuPositionClassName(getMenuPositionClassName(entry.target));\r\n        }\r\n      });\r\n    });\r\n\r\n    if (submenuElement) {\r\n      observer.observe(submenuElement);\r\n    }\r\n\r\n    return () => {\r\n      if (submenuElement) {\r\n        observer.unobserve(submenuElement);\r\n      }\r\n    };\r\n  }, []);\r\n\r\n  const iconAfter = option.iconAfter ? option.iconAfter : hasSubmenu ? chevronNode : null;\r\n\r\n  const _handleChange = (value: string) => {\r\n    setSearchValue(value);\r\n    debounceFilter();\r\n  };\r\n\r\n  const removeHoverClassTimeoutRef = useRef<NodeJS.Timeout | null>(null);\r\n\r\n  const handleMouseEnter = (element: HTMLElement) => {\r\n    const alreadyHoveredElements =\r\n      element?.parentElement?.querySelectorAll('.rnd__option--hover') ?? [];\r\n\r\n    const input = element.querySelector('.rnd__search') as HTMLInputElement | null;\r\n\r\n    if (input) {\r\n      setTimeout(() => {\r\n        try {\r\n          input.focus();\r\n        } catch {}\r\n      }, 25);\r\n    }\r\n\r\n    alreadyHoveredElements.forEach(el => {\r\n      if (el !== element) {\r\n        el.classList.remove('rnd__option--hover');\r\n      }\r\n    });\r\n\r\n    if (removeHoverClassTimeoutRef.current) {\r\n      clearTimeout(removeHoverClassTimeoutRef.current);\r\n      removeHoverClassTimeoutRef.current = null;\r\n    }\r\n    element.classList.add('rnd__option--hover');\r\n  };\r\n\r\n  const handleMouseLeave = (element: HTMLElement) => {\r\n    removeHoverClassTimeoutRef.current = setTimeout(() => {\r\n      element.classList.remove('rnd__option--hover');\r\n    }, closeDebounce);\r\n  };\r\n\r\n  const debounceFilter = useMemo(\r\n    () => _debounce(() => setRenderTrigger(prev => !prev), debounce),\r\n    [debounce],\r\n  );\r\n\r\n  const maxHeightStyle = useMemo(() => {\r\n    if (!maxHeight) {\r\n      return {};\r\n    }\r\n\r\n    return { maxHeight: `${maxHeight}px`, overflowY: 'auto' } as any;\r\n  }, [maxHeight]);\r\n\r\n  const handleKeyDown = useCallback(\r\n    (e: React.KeyboardEvent<HTMLInputElement>) => {\r\n      if (e.key === 'Escape') {\r\n        setSubmenuOpen(false);\r\n        setSearchValue('');\r\n      }\r\n\r\n      if (hasSubmenu) {\r\n        return;\r\n      }\r\n\r\n      if (e.key === 'Enter' || e.key === 'NumpadEnter' || e.which === 13) {\r\n        if (filteredList.length) {\r\n          onSelect(filteredList[0]);\r\n          setSearchValue('');\r\n        }\r\n      }\r\n    },\r\n    [filteredList, onSelect],\r\n  );\r\n\r\n  return (\r\n    <li\r\n      className={clsx('rnd__option', option.className, {\r\n        'rnd__option--disabled': option.disabled,\r\n        'rnd__option--with-menu': hasSubmenu,\r\n      })}\r\n      onMouseEnter={e => {\r\n        handleMouseEnter(e.currentTarget);\r\n      }}\r\n      onMouseLeave={e => {\r\n        handleMouseLeave(e.currentTarget);\r\n      }}\r\n      onMouseDown={handleClick}\r\n      onKeyUp={handleClick}\r\n    >\r\n      {hasSubmenu && (\r\n        <ul\r\n          className={clsx(`rnd__menu rnd__submenu ${menuPositionClassName}`, {\r\n            'rnd__submenu--opened': submenuIsOpen,\r\n          })}\r\n          ref={submenuRef}\r\n          style={{ ...maxHeightStyle }}\r\n        >\r\n          {renderInput &&\r\n            renderInput({\r\n              value: searchValue,\r\n              onChange: e => _handleChange(e.currentTarget.value),\r\n              onKeyDown: handleKeyDown,\r\n              mounted: submenuIsOpen,\r\n            })}\r\n\r\n          {filteredList.map((item, index) => (\r\n            <Option\r\n              key={`${item.label}_${index}`}\r\n              option={item}\r\n              onSelect={onSelect}\r\n              renderOption={renderOption}\r\n              renderInput={renderInput}\r\n            />\r\n          ))}\r\n        </ul>\r\n      )}\r\n      {renderOption && renderOption(option)}\r\n      {!renderOption && (\r\n        <>\r\n          {option.iconBefore && (\r\n            <div className=\"rnd__option-icon rnd__option-icon--left\">{option.iconBefore}</div>\r\n          )}\r\n          <p\r\n            style={{\r\n              width: itemsContainerWidth,\r\n            }}\r\n            className=\"rnd__option-label\"\r\n          >\r\n            {option.label}\r\n          </p>\r\n          {iconAfter && <div className=\"rnd__option-icon rnd__option-icon--right\">{iconAfter}</div>}\r\n        </>\r\n      )}\r\n    </li>\r\n  );\r\n};\r\n\r\nconst chevronNode = (\r\n  <div\r\n    style={{\r\n      border: '5px solid currentColor',\r\n      borderRightColor: 'transparent',\r\n      borderBottomColor: 'transparent',\r\n      borderTopColor: 'transparent',\r\n      width: 0,\r\n      height: 0,\r\n    }}\r\n  />\r\n);\r\n"],"names":[],"mappings":"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"}